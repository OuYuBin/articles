<?php
	#*****************************************************************************
	#
	# articles.rss
	#
	# Author: 		Wayne Beaton
	# Date:			2006-04-20
	#
	# Description: This page generates an RSS feed containing articles that have
	# been changed in the last six months.
	#
	#
	#****************************************************************************

	echo "<?xml version=\"1.0\"?>";
	
	include("scripts/articles.php");
	$listing =& get_listing();
	$category =& $listing->categories['all'];
	$category->sort_articles();
	$articles =& $category->articles;
	
	echo <<<EORSS
<rss version="2.0">
  <channel>
    <title>Eclipse Corner Articles</title>
    <link>http://eclipse.org/articles</link>
    <description>Eclipse Corner Articles</description>
    <image>
      <url>http://www.eclipse.org/articles/images/eclipse.png</url>
      <title>eclipse.org</title>
      <link>http://www.eclipse.org/articles</link>
    </image>
EORSS;
	$base_date = strtotime('-6 months');
	foreach ($articles as $article) {
		if (!$article->is_more_recent_than($base_date)) break;
		echo "\n\t<item>";
		echo "\n\t\t<title>$article->title</title>";
		echo "\n\t\t<link>http://www.eclipse.org/$article->root/$article->link</link>";
		echo "\n\t\t<description><![CDATA[$article->description]]></description>";
		$date = date("D, j M Y", $article->most_recent_date());
		echo "\n\t\t<pubDate>$date</pubDate>";
		echo "\n\t</item>";
	}
	
	echo <<<EORSS1
	</channel>
</rss>
EORSS1;
?>
